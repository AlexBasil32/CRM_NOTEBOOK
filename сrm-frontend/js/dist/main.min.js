"use strict";!function(){var z=300,y="visible",c="http://localhost:3000/api/clients",G={columnOfSort:"id",stateOfSort:{id:!0,fullname:!1,createdAt:!1,updatedAt:!1},clients:[]},o=["Телефон","Facebook","VK","Email","Другое"],Q={type:"new",headTitle:function(){return[this.type]},buttonSubmit:function(){return"delete"===this.type?"Удалить":"Сохранить"},button:function(){return"change"===this.type?"Удалить клиента":"Отмена"}};function n(e){var t=e.columnOfSort,a=e.stateOfSort,n=e.clients,r=document.querySelector("tbody"),c=a.id,s=a.fullname,d=a.createdAt,o=a.updatedAt,i=[];switch(t){case"fullname":i=function(e,t){if(t)return e.sort(function(e,t){return e.surname.trim().toLowerCase()+e.name.trim().toLowerCase()+e.lastName.trim().toLowerCase()<t.surname.trim().toLowerCase()+t.name.trim().toLowerCase()+t.lastName.trim().toLowerCase()?1:-1});return e.sort(function(e,t){return e.surname.trim().toLowerCase()+e.name.trim().toLowerCase()+e.lastName.trim().toLowerCase()>t.surname.trim().toLowerCase()+t.name.trim().toLowerCase()+t.lastName.trim().toLowerCase()?1:-1})}(n,s);break;case"createdAt":i=l(n,t,d);break;case"updatedAt":i=l(n,t,o);break;default:i=function(e,t){if(t)return e.sort(function(e,t){return e.id>t.id?1:-1});return e.sort(function(e,t){return e.id<t.id?1:-1})}(n,c)}r.innerHTML="",function(t,a){document.querySelectorAll(".table__column_sort").forEach(function(e){e.id===t?e.childNodes[0].classList.add("color_light-slate-blue"):e.childNodes[0].classList.remove("color_light-slate-blue"),a[e.id]?(e.childNodes[1].classList.remove("rotate_180"),"fullname"===e.id&&(e.childNodes[2].innerText="Я-А")):(e.childNodes[1].classList.add("rotate_180"),"fullname"===e.id&&(e.childNodes[2].innerText="А-Я"))})}(t,a),i.forEach(function(e){r.append(function(e){var t=document.createElement("tr"),a=document.createElement("td"),n=document.createElement("td"),r=document.createElement("td"),c=document.createElement("div"),s=document.createElement("span"),d=document.createElement("span"),o=document.createElement("td"),i=document.createElement("div"),l=document.createElement("span"),u=document.createElement("span"),m=document.createElement("td"),p=function(e){var r=document.createElement("ul");r.classList.add("contacts__list");var c=e.length,s=!0;return e.forEach(function(e,t){if(4===t&&5<c){var a=document.createElement("li"),n=document.createElement("span");a.classList.add("contacts__item"),n.classList.add("contacts__icon_ring"),a.setAttribute("id","comb"),n.setAttribute("data-value","Развернуть"),n.innerText="+"+(c-1-t),a.append(n),r.append(a),s=!1}r.append(function(e,t){var a=document.createElement("li"),n=document.createElement("img");a.classList.add("contacts__item"),t||a.classList.add("blocked");n.classList.add("contacts__icon"),"Другое"===e.type?n.setAttribute("data-type",""):n.setAttribute("data-type",e.type+":");switch(n.setAttribute("data-value",e.value),e.type){case"Телефон":n.setAttribute("src","./img/phone.svg"),n.setAttribute("alt","Телефон");break;case"Facebook":n.setAttribute("src","./img/fb.svg"),n.setAttribute("alt","Фэйсбук");break;case"VK":n.setAttribute("src","./img/vk.svg"),n.setAttribute("alt","В контактах");break;case"Email":n.setAttribute("src","./img/mail.svg"),n.setAttribute("alt","Имэйл");break;default:n.setAttribute("src","./img/other.svg"),n.setAttribute("alt","Другое")}return a.append(n),a}(e,s))}),r}(e.contacts),_=document.createElement("td"),b=document.createElement("div"),f=document.createElement("button"),L=document.createElement("span"),v=document.createElement("span"),E=document.createElement("button"),h=document.createElement("span"),y=document.createElement("span");return t.classList.add("table__row"),a.classList.add("row__cells","body-cells_id"),n.classList.add("row__cells","body-cells_fullname"),r.classList.add("row__cells"),c.classList.add("cell-create__wrapper"),s.classList.add("cell-create__date"),d.classList.add("cell-create__time"),o.classList.add("row__cells"),i.classList.add("cell-update__wrapper"),l.classList.add("cell-update__date"),u.classList.add("cell-update__time"),m.classList.add("row__cells"),_.classList.add("row__cells"),b.classList.add("actions__wrapper"),f.classList.add("edit-btn","btn"),L.classList.add("actions-btn__icon","edit-btn__icon"),v.classList.add("edit-btn__text"),E.classList.add("delete-btn","btn"),h.classList.add("actions-btn__icon","delete-btn__icon"),y.classList.add("delete-btn__text"),t.setAttribute("id",e.id),f.setAttribute("data-id",e.id),E.setAttribute("data-id",e.id),a.innerText=e.id.slice(-6),n.innerText="".concat(e.surname.trim()," ").concat(e.name.trim()," ").concat(e.lastName.trim()),s.innerText=x(e.createdAt),d.innerText=g(e.createdAt),l.innerText=x(e.updatedAt),u.innerText=g(e.updatedAt),v.innerText="Изменить",y.innerText="Удалить",c.append(s),c.append(d),r.append(c),i.append(l),i.append(u),o.append(i),m.append(p),f.append(L),f.append(v),E.append(h),E.append(y),b.append(f),b.append(E),_.append(b),t.append(a),t.append(n),t.append(r),t.append(o),t.append(m),t.append(_),t}(e))}),function(e){e.querySelectorAll("#comb").forEach(function(e){e.addEventListener("click",function(){e.parentNode.querySelectorAll(".contacts__item").forEach(function(e){e.id?e.classList.add("blocked"):e.classList.remove("blocked")})})})}(r),r.querySelectorAll(".delete-btn").forEach(function(e){e.addEventListener("click",function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return this.dataset.id,Q.type="delete",e.next=4,regeneratorRuntime.awrap(ee(this.dataset.id));case 4:Z(e.sent,Q);case 6:case"end":return e.stop()}},null,this)})}),r.querySelectorAll(".edit-btn").forEach(function(r){r.addEventListener("click",function(){var t,a,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.dataset.id,a=r.querySelector(".edit-btn__icon"),Q.type="change",a.classList.add("load__icon"),e.next=6,regeneratorRuntime.awrap(ee(t));case 6:n=e.sent,a.classList.remove("load__icon"),Z(n,Q),document.location.hash="id_"+t;case 10:case"end":return e.stop()}},null,this)})})}function x(e){return e.slice(8,10)+"."+e.slice(5,7)+"."+e.slice(0,4)}function g(e){return e.slice(11,16)}function X(t,e){e.querySelectorAll(".table__column_sort").forEach(function(e){e.addEventListener("click",function(){t.columnOfSort=e.id,t.stateOfSort[e.id]?t.stateOfSort[e.id]=!1:t.stateOfSort[e.id]=!0,n(t)})})}function l(e,a,t){return t?e.sort(function(e,t){return new Date(e[a]).getTime()>new Date(t[a]).getTime()?1:-1}):e.sort(function(e,t){return new Date(e[a]).getTime()<new Date(t[a]).getTime()?1:-1})}function Y(){var d,o,i;document.addEventListener("mouseover",function(e){var t=e.target,a=t.dataset.type,n=t.dataset.value;if(a||n){d=document.createElement("div"),i=document.createElement("span"),d.classList.add("tooltip"),i.classList.add("tooltip__value"),a&&((o=document.createElement("span")).classList.add("tooltip__title"),o.innerText=a,d.append(o),i.classList.add("color_light-slate-blue")),i.innerText=n,d.append(i),document.body.append(d);var r=t.getBoundingClientRect(),c=r.left+(t.offsetWidth-d.offsetWidth)/2;c<0&&(c=0);var s=r.top-d.offsetHeight-10;s<0&&(s=r.top+t.offsetHeight+10),d.style.left=c+"px",d.style.top=s+"px",d.style.opacity=1}}),document.addEventListener("mouseout",function(){d&&(d.remove(),d=null)})}function Z(e,t){var n=e.id,a=e.surname,r=e.name,c=e.lastName,s=e.contacts,d=t.type,o=(t.buttonSubmit,t.button,document.createElement("div")),i=document.createElement("div"),l=document.createElement("span");o.classList.add("modal"),i.classList.add("modal__wrapper"),l.classList.add("modal__close"),l.setAttribute("data-btn","close"),i.append(l);var u=null;"change"===d&&(u=n);var m=function(e,t){var a=document.createElement("div"),n=document.createElement("h2");if(a.classList.add("modal__header","modal__container"),n.classList.add("modal-header__heading"),n.textContent=e,a.append(n),t){var r=document.createElement("span");r.classList.add("modal-header__id"),r.innerText="ID: ".concat(t.slice(-6)),a.append(r)}return{header:a,headerTitle:n}}(t.headTitle(),u);i.append(m.header);var p=document.createElement("form");p.classList.add("modal__form"),p.setAttribute("action","#");var _=function(){var e=document.createElement("div"),t=document.createElement("span");return e.classList.add("modal-error","blocked"),t.classList.add("modal-error__text"),e.classList.remove("blocked"),e.append(t),{wrapperError:e,spanError:t}}();if("delete"!==d){var b=function(e,t,a){var n=document.createElement("fieldset"),r=document.createElement("div"),c=document.createElement("div"),s=document.createElement("input"),d=document.createElement("lable"),o=document.createElement("span"),i=document.createElement("div"),l=document.createElement("input"),u=document.createElement("lable"),m=document.createElement("span"),p=document.createElement("div"),_=document.createElement("input"),b=document.createElement("lable");n.classList.add("fieldset_reset","modal-fullname"),r.classList.add("modal__container","modal-contaiter_position_flex"),c.classList.add("inputs__wrap"),s.classList.add("input","modal__intup"),d.classList.add("modal__lable"),o.classList.add("lable_asterix"),i.classList.add("inputs__wrap"),l.classList.add("input","modal__intup"),u.classList.add("modal__lable"),m.classList.add("lable_asterix"),p.classList.add("inputs__wrap"),_.classList.add("input","modal__intup"),b.classList.add("modal__lable"),s.setAttribute("id","surname"),s.setAttribute("data-input","surname"),s.setAttribute("type","text"),s.setAttribute("name","surname"),d.setAttribute("for","surname"),l.setAttribute("id","name"),l.setAttribute("data-input","name"),l.setAttribute("type","text"),l.setAttribute("name","name"),u.setAttribute("for","name"),_.setAttribute("id","lastname"),_.setAttribute("data-input","lastname"),_.setAttribute("type","text"),_.setAttribute("name","lastname"),b.setAttribute("for","lastname"),d.textContent="Фамилия",o.textContent="*",u.textContent="Имя",m.textContent="*",b.textContent="Отчество",e&&(d.classList.add("modal__lable_up"),s.value=e);t&&(u.classList.add("modal__lable_up"),l.value=t);a&&(b.classList.add("modal__lable_up"),_.value=a);return d.append(o),u.append(m),c.append(d),c.append(s),i.append(u),i.append(l),p.append(b),p.append(_),r.append(c),r.append(i),r.append(p),n.append(r),s.addEventListener("input",function(){s.parentNode.classList.remove("border-color_burnt-sienna")}),l.addEventListener("input",function(){l.parentNode.classList.remove("border-color_burnt-sienna")}),function(e){e.querySelectorAll(".inputs__wrap").forEach(A)}(r),n}(a,r,c);p.append(b);var f=function(e){var t=document.createElement("fieldset"),a=document.createElement("div"),n=document.createElement("ul");t.classList.add("modal-contacts","fieldset_reset"),a.classList.add("modal__container"),n.classList.add("modal-contacts__list"),a.append(n),e&&e.forEach(function(e){var t=k(e);n.append(t)});setTimeout(w,300);var r=function(){var e=document.createElement("button"),t=document.createElement("span"),a=document.createElement("span");return e.classList.add("modal-addcontact__btn","btn",y),t.classList.add("modal-addcontact__icon"),a.classList.add("modal-addcontact__title"),e.setAttribute("data-btn","contact-add"),a.textContent="Добавить контакт",e.append(t),e.append(a),e}();return t.append(a),t.append(r),{fieldsetContacts:t,buttonAddContactElement:r,wrapperContacts:a}}(s),L=f.fieldsetContacts,v=f.buttonAddContactElement,E=f.wrapperContacts;p.append(L),i.append(p),S(v,L),function(a,n){var r=n.querySelector(".modal-contacts__list");a.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=k("");r.append(t),w(),q(t),T(t),R(t,a,n),S(a,n)})}(v,E),function(t,a){a.querySelectorAll(".modal-contacts__item").forEach(function(e){R(e,t,a)})}(v,E),function(e){e.querySelectorAll(".modal-contacts__item").forEach(function(e){T(e)})}(E),i.append(_.wrapperError)}else i.append(_.wrapperError),_.wrapperError.classList.remove("blocked"),_.spanError.textContent="Вы действительно хотите удалить данного клиента?",_.spanError.classList.add("modal-error__text-style"),m.header.classList.add("align-center","modal-header-margin-bottom"),m.headerTitle.classList.add("modal-header__heading-padding-top");var h=function(e,t){var a=document.createElement("div"),n=document.createElement("button"),r=document.createElement("span"),c=document.createElement("span"),s=document.createElement("button");return a.classList.add("modal-btns"),n.classList.add("submit-btn","btn"),r.classList.add("submit-btn__icon"),c.classList.add("submit-btn__title"),s.classList.add("modal-delete-btn","btn"),n.setAttribute("data-btn","submit"),s.setAttribute("data-btn","small"),c.textContent=e,s.textContent=t,n.append(r),n.append(c),a.append(n),a.append(s),{wrapperButtons:a,buttonSubmit:n,buttonSmall:s}}(t.buttonSubmit(),t.button());i.append(h.wrapperButtons),o.append(i),document.body.append(o),document.addEventListener("keydown",function(e){"Escape"==e.code&&D(o)}),l.addEventListener("click",function(){D(o)}),o.addEventListener("click",function(e){e.target.classList.contains("modal")&&D(o)}),h.buttonSubmit.addEventListener("click",function(){var t,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!=d){e.next=4;break}O(n,o),e.next=24;break;case 4:if((t=C(o)).textError){e.next=22;break}if((a=h.buttonSubmit.querySelector(".submit-btn__icon")).classList.add("upload_visible"),N(o,!0),"new"==d)return e.next=12,regeneratorRuntime.awrap(B(t,o));e.next=14;break;case 12:e.next=17;break;case 14:if("change"==d)return e.next=17,regeneratorRuntime.awrap(H(t,u,o));e.next=17;break;case 17:a.classList.remove("upload_visible"),N(o,!1),e.next=24;break;case 22:_.wrapperError.classList.remove("blocked"),_.spanError.innerHTML=t.textError;case 24:case 25:case"end":return e.stop()}})}),h.buttonSmall.addEventListener("click",function(){"change"!==d?D(o):O(n,o)}),function(e){e.querySelectorAll(".contacts-type").forEach(function(e){q(e)})}(o);setTimeout(function(){o.classList.add(y),i.classList.add(y)},100);return o}function w(){var e=document.querySelector(".modal-contacts");e&&(e.querySelectorAll(".modal-contacts__item").length?e.classList.add("modal-contacts_padding"):e.classList.remove("modal-contacts_padding"))}function A(e){var t=e.querySelector(".modal__intup"),a=e.querySelector(".modal__lable");t.addEventListener("focus",function(){a.classList.add("modal__lable_up")}),t.addEventListener("blur",function(){t.value||a.classList.remove("modal__lable_up")})}function k(e){var t=document.createElement("li"),a=document.createElement("div"),n=document.createElement("button"),r=document.createElement("ul"),c=document.createElement("input"),s=document.createElement("button"),d=document.createElement("span");return t.classList.add("modal-contacts__item"),a.classList.add("contacts-type"),n.classList.add("contact-type__button","btn"),r.classList.add("contact-type__list"),c.classList.add("input","contact-value","contact-value_border-right"),c.setAttribute("type","text"),c.setAttribute("placeholder","Введите данные контакта"),s.classList.add("delete-contact__btn","btn","blocked"),d.classList.add("delete-contact__icon"),n.textContent="Тип контакта",o.forEach(function(e){var t=document.createElement("li");t.classList.add("contact-type__item"),t.textContent=e,r.append(t)}),e&&(n.textContent=e.type,c.value=e.value,s.classList.remove("blocked")),s.append(d),a.append(n),a.append(r),t.append(a),t.append(c),t.append(s),c.addEventListener("input",function(){c.classList.remove("border-color_burnt-sienna")}),t}function S(e,t){10<=t.querySelectorAll(".modal-contacts__item").length?e.classList.remove(y):e.classList.add(y)}function q(e){var t=e.querySelector(".contact-type__button"),a=e.querySelector(".contact-type__list"),n=a.querySelectorAll(".contact-type__item");t.addEventListener("click",function(e){e.preventDefault(),a.classList.toggle("contact-type__list_visible"),t.classList.toggle("contact-type__button_rotate")}),n.forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation(),t.classList.remove("border-color_burnt-sienna"),t.textContent=this.innerText,t.focus(),r(a,t)})}),document.addEventListener("click",function(e){e.target!==t&&r(a,t)}),document.addEventListener("keydown",function(e){"Tab"!==e.key&&"Escape"!==e.key||r(a,t)})}function r(e,t){e.classList.remove("contact-type__list_visible"),t.classList.remove("contact-type__button_rotate")}function T(e){var t=e.querySelector(".delete-contact__btn"),a=e.querySelector(".contact-value");e.addEventListener("input",function(e){e.stopPropagation(),a.value?t.classList.remove("blocked"):t.classList.add("blocked")})}function R(e,t,a){e.querySelector(".delete-contact__btn").addEventListener("click",function(){e.remove(),S(t,a),w()})}function C(e){var s="",t=e.querySelector("#surname"),a=t.value.trim();a||(t.parentNode.classList.add("border-color_burnt-sienna"),s="Введите фамилию клиента");var n=e.querySelector("#name"),r=n.value.trim();r||(n.parentNode.classList.add("border-color_burnt-sienna"),s&&(s+="<br>"),s+="Введите имя клиента");var c=e.querySelector("#lastname").value.trim(),d=[];return e.querySelectorAll(".modal-contacts__item").forEach(function(e){var t=e.querySelector(".contact-type__button"),a=t.innerText;"Тип контакта"===a&&(t.classList.add("border-color_burnt-sienna"),s&&(s+="<br>"),s+="Установите тип контакта");var n=e.querySelector(".contact-value"),r=n.value.trim();r||(n.classList.add("border-color_burnt-sienna"),s&&(s+="<br>"),s+="Введите данные контакта");var c={type:a,value:r};d.push(c)}),{name:r,surname:a,lastName:c,contacts:d,textError:s}}function N(e,t){var a=e.querySelectorAll(".modal__intup"),n=e.querySelectorAll(".modal-contacts__item"),r=e.querySelector(".modal-addcontact__btn"),c=e.querySelector(".submit-btn"),s=e.querySelector(".modal-delete-btn");t?(a.forEach(function(e){e.disabled=!0}),n.forEach(function(e){var t=e.querySelector(".contact-type__button"),a=e.querySelector(".contact-value"),n=e.querySelector(".delete-contact__btn");t.disabled=!0,a.disabled=!0,n.disabled=!0}),r.disabled=!0,c.disabled=!0,s.disabled=!0):(a.forEach(function(e){e.disabled=!1}),n.forEach(function(e){var t=e.querySelector(".contact-type__button"),a=e.querySelector(".contact-value"),n=e.querySelector(".delete-contact__btn");t.disabled=!1,a.disabled=!1,n.disabled=!1}),r.disabled=!1,c.disabled=!1,s.disabled=!1)}function D(e){var t=e.querySelector(".modal__wrapper");e.classList.remove(y),t.classList.remove(y);setTimeout(function(){e.remove()},z);document.location.hash=""}function O(t,a){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(p(t));case 2:s(e.sent,a);case 4:case"end":return e.stop()}})}function B(t,a){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(u(t));case 2:s(e.sent,a);case 4:case"end":return e.stop()}})}function H(t,a,n){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(m(t,a));case 2:s(e.sent,n);case 4:case"end":return e.stop()}})}function s(t,a){var n,r,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.querySelector(".modal-error"),c=r.querySelector(".modal-error__text"),200===t.status||201===t.status)return e.next=5,regeneratorRuntime.awrap(te());e.next=8;break;case 5:D(a),e.next=30;break;case 8:if("delete"===Q.type){e.next=29;break}if(500!==t.status){e.next=13;break}n="Данные не сохранены. Ответ сервера - ".concat(t.status,". Ошибка работы сервера."),e.next=26;break;case 13:e.t0=t.status,e.next=404===e.t0?16:422===e.t0?18:23;break;case 16:return n="Данные не сохранены. Ответ сервера - 404. Не удалось найти запрашиваемую страницую.",e.abrupt("break",25);case 18:return e.next=20,regeneratorRuntime.awrap(t.json());case 20:return e.sent.errors.forEach(function(e){n=n?n+" <br> "+e.message:e.message}),e.abrupt("break",25);case 23:return n='"Что-то пошло не так..."',e.abrupt("break",25);case 25:case 26:r.classList.remove("blocked"),c.innerHTML=n;case 29:case 30:case 31:case"end":return e.stop()}})}var d=function(t){return new Promise(function(e){return setTimeout(function(){return e()},t)})};function i(){var t,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(d(z));case 2:return e.next=4,regeneratorRuntime.awrap(fetch(c));case 4:return t=e.sent,e.next=7,regeneratorRuntime.awrap(t.json());case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}})}function $(t){var a,n,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(d(z));case 2:return a="".concat(c,"?search=").concat(t),e.next=5,regeneratorRuntime.awrap(fetch(a));case 5:return n=e.sent,e.next=8,regeneratorRuntime.awrap(n.json());case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}})}function u(t){var a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(d(z));case 2:return e.next=4,regeneratorRuntime.awrap(fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}));case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}})}function ee(t){var a,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(d(z));case 2:return e.next=4,regeneratorRuntime.awrap(fetch("".concat(c,"/").concat(t)));case 4:return a=e.sent,e.next=7,regeneratorRuntime.awrap(a.json());case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}})}function m(t,a){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(d(z));case 2:return e.next=4,regeneratorRuntime.awrap(fetch("".concat(c,"/").concat(a),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}));case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}})}function p(t){var a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetch("".concat(c,"/").concat(t),{method:"DELETE"}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}})}function te(){var t,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.querySelector(".search-form__input")).disabled=!0,(a=document.querySelector(".table-body__overlay")).classList.remove("blocked"),e.next=6,regeneratorRuntime.awrap(i());case 6:G.clients=e.sent,n(G),a.classList.add("blocked"),t.disabled=!1;case 10:case"end":return e.stop()}})}function ae(e,a){return e.forEach(function(e){var t=document.createElement("li");t.classList.add("search__items"),t.setAttribute("data-id",e.id),t.textContent=e.name+" "+e.surname,a.append(t),t.addEventListener("click",function(){re(this.dataset.id),ce(a)})}),a.classList.remove("blocked"),a}function ne(e,t){return e>t.length-1&&(e=0),e<0&&(e=t.length-1),function(e){e.forEach(function(e){e.classList.remove("search__items_focused")})}(t),t[e].classList.add("search__items_focused"),e}function re(e){var t=document.getElementById(e);t.classList.add("outline_medium-slate-blue"),t.scrollIntoView({behavior:"smooth",block:"start"})}function ce(e){e.classList.add("blocked"),e.innerHTML=""}document.addEventListener("DOMContentLoaded",function(){var H,j,P,I,M,V,F,J,K,W,U;regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return W=function(){var t,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j.input.value.trim(),ce(V),t)return e.next=5,regeneratorRuntime.awrap($(t));e.next=10;break;case 5:a=e.sent,J=a.length?ae(a,V,I.tableBody).querySelectorAll(".search__items"):null,e.next=11;break;case 10:J=null;case 11:case 12:case"end":return e.stop()}})},H=document.getElementById("crm-app"),B=O=D=N=C=void 0,C=document.createElement("header"),N=document.createElement("a"),D=document.createElement("img"),O=document.createElement("form"),B=document.createElement("input"),C.classList.add("header","header__container"),N.classList.add("logo"),O.classList.add("search-form"),B.classList.add("input","search-form__input"),D.setAttribute("src","./img/logo.svg"),D.setAttribute("alt","Логотип Эс Кей Би"),O.setAttribute("action","#"),B.setAttribute("type","text"),B.setAttribute("placeholder","Введите запрос"),N.append(D),O.append(B),C.append(N),C.append(O),j={header:C,form:O,input:B},R=T=q=S=k=A=w=g=x=y=h=E=v=L=f=b=_=p=m=u=l=void 0,l=document.createElement("main"),u=document.createElement("h1"),m=document.createElement("div"),p=document.createElement("table"),_=document.createElement("thead"),b=document.createElement("tr"),f=document.createElement("th"),L=document.createElement("span"),v=document.createElement("span"),E=document.createElement("th"),h=document.createElement("span"),y=document.createElement("span"),x=document.createElement("span"),g=document.createElement("th"),w=document.createElement("span"),A=document.createElement("span"),k=document.createElement("th"),S=document.createElement("span"),q=document.createElement("span"),T=document.createElement("th"),R=document.createElement("th"),l.classList.add("container"),u.classList.add("main__title"),m.classList.add("table__box"),p.classList.add("table"),b.classList.add("table-head__row"),f.classList.add("table-head__cells","table-head_id","table__column_sort"),L.classList.add("head-id__title"),v.classList.add("table-head__icon"),E.classList.add("table-head__cells","table-head_fullname","table__column_sort"),h.classList.add("head-fullname__title"),y.classList.add("table-head__icon","rotate_180"),x.classList.add("head-fullname__descr"),g.classList.add("table-head__cells","table-head_createdate","table__column_sort"),w.classList.add("head-createdate__title"),A.classList.add("table-head__icon","rotate_180"),k.classList.add("table-head__cells","table-head_updatedate","table__column_sort"),S.classList.add("head-updatedate__title"),q.classList.add("table-head__icon","rotate_180"),T.classList.add("table-head__cells"),R.classList.add("table-head__cells","table-head_actions"),u.innerText="Клиенты",f.setAttribute("id","id"),L.innerText="ID",E.setAttribute("id","fullname"),h.innerText="Фамилия Имя Отчество",x.innerText="А-Я",g.setAttribute("id","createdAt"),w.innerText="Дата и время создания",k.setAttribute("id","updatedAt"),S.innerText="Последние изменения",T.setAttribute("id","contacts"),T.innerText="Контакты",R.setAttribute("id","actions"),R.innerText="Действия",f.append(L),f.append(v),E.append(h),E.append(y),E.append(x),g.append(w),g.append(A),k.append(S),k.append(q),b.append(f),b.append(E),b.append(g),b.append(g),b.append(k),b.append(T),b.append(R),_.append(b),p.append(_),m.append(p),l.append(u),l.append(m),P={main:l,tableBox:m,tr:b},o=d=s=c=void 0,c=document.createElement("div"),s=document.createElement("div"),d=document.createElement("div"),o=document.createElement("table"),i=document.createElement("tbody"),c.classList.add("table-body"),s.classList.add("table-body__overlay","blocked"),d.classList.add("table-body__ring"),o.classList.add("table","data-table"),s.append(d),o.append(i),c.append(s),c.append(o),I={tableBody:c,overlay:s},r=n=a=t=void 0,t=document.createElement("div"),a=document.createElement("button"),n=document.createElement("span"),r=document.createElement("span"),t.classList.add("add-client"),a.classList.add("add-client__btn","btn"),r.classList.add("add-client__icon"),n.innerText="Добавить клиента",a.append(r),a.append(n),t.append(a),M={wrapper:t,button:a},H.append(j.header),H.append(P.main),P.tableBox.append(I.tableBody),P.main.append(M.wrapper),e.next=12,regeneratorRuntime.awrap(te());case 12:if(Y(),(V=document.createElement("ul")).classList.add("search__list","blocked"),j.form.append(V),J=F=null,K=-1,j.input.addEventListener("input",function(){I.tableBody.querySelectorAll(".table__row").forEach(function(e){e.classList.remove("outline_medium-slate-blue")}),clearTimeout(F),F=setTimeout(function(){W()},z)}),document.addEventListener("keydown",function(e){if(J)switch(e.key){case"Enter":e.preventDefault(),re(J[K].dataset.id),ce(V);break;case"ArrowDown":K=ne(++K,J);break;case"ArrowUp":K=ne(--K,J);break;case"Escape":ce(V)}}),X(G,P.tr),M.button.addEventListener("click",function(){Q.type="new",Z("",Q)}),document.location.hash)return U=document.location.hash.split("_")[1],Q.type="change",e.next=29,regeneratorRuntime.awrap(ee(U));e.next=31;break;case 29:Z(e.sent,Q);case 31:case 32:case"end":return e.stop()}var t,a,n,r,c,s,d,o,i,l,u,m,p,_,b,f,L,v,E,h,y,x,g,w,A,k,S,q,T,R,C,N,D,O,B})})}();
//# sourceMappingURL=main.min.js.map
